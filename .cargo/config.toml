{%- if mcu == "esp32c3" -%}
{%- if atomics -%}
[target.riscv32imac-unknown-none-elf]
{%- else -%}
[target.riscv32imc-unknown-none-elf]
{%- endif %}
{%- else -%}
[target.xtensa-{{ mcu }}-none-elf]
{%- endif %}
runner = "espflash --monitor"

[build]
{% if mcu == "esp32c3" -%}
rustflags = [
    "-C", "link-arg=-Tlinkall.x",
]
{% if atomics -%}
target = "riscv32imac-unknown-none-elf"
{%- else -%}
target = "riscv32imc-unknown-none-elf"
{%- endif %}
{%- else -%}
rustflags = [
  "-C", "link-arg=-nostartfiles",
  "-C", "link-arg=-Wl,-Tlinkall.x",
]
target = "xtensa-{{ mcu }}-none-elf"
{%- endif %}

[unstable]
build-std = ["core"]
